<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="baidu-site-verification" content="mPAf58NqVi"><meta name="theme-color" content="#222"><script></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="VHVpO4C55fLeBN-R2xFEX7TikjQNBclZfj_Ck0AG5uw"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-48x48-next.ico?v=5.1.3"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.ico?v=5.1.3"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.ico?v=5.1.3"><link rel="mask-icon" href="/images/favicon-48x48-next.ico#/images/logo.svg?v=5.1.3" color="#222"><meta name="keywords" content="SQL Injection,SQLi 细节篇,"><link rel="alternate" href="/atom.xml" title="Eibit's Blog" type="application/atom+xml"><meta name="description" content="仁者见仁,智者见智   SQL注入漏洞产生的原因是网站应用程序在编写时未对用户提交至服务器的数据进行合法性校验，即没有进行有效地特殊字符过滤，导致网站服务器存在安全风险，这就是SQL Injection，即SQL注入漏洞。"><meta name="keywords" content="SQL Injection,SQLi 细节篇"><meta property="og:type" content="article"><meta property="og:title" content="SQL注入之细节 - 入门篇"><meta property="og:url" content="https://eibitme.github.io/2017/12/20/SQL注入之细节 - 入门篇/index.html"><meta property="og:site_name" content="Eibit&#39;s Blog"><meta property="og:description" content="仁者见仁,智者见智   SQL注入漏洞产生的原因是网站应用程序在编写时未对用户提交至服务器的数据进行合法性校验，即没有进行有效地特殊字符过滤，导致网站服务器存在安全风险，这就是SQL Injection，即SQL注入漏洞。"><meta property="og:locale" content="zh-Hans"><meta property="og:updated_time" content="2017-12-21T05:28:27.648Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="SQL注入之细节 - 入门篇"><meta name="twitter:description" content="仁者见仁,智者见智   SQL注入漏洞产生的原因是网站应用程序在编写时未对用户提交至服务器的数据进行合法性校验，即没有进行有效地特殊字符过滤，导致网站服务器存在安全风险，这就是SQL Injection，即SQL注入漏洞。"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"5.1.3",sidebar:{position:"left",display:"always",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://eibitme.github.io/2017/12/20/SQL注入之细节 - 入门篇/"><script src="/js/src/pace.min.js"></script><title>SQL注入之细节 - 入门篇 | Eibit's Blog</title></head><canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:1;pointer-events:none"></canvas><script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script><script type="text/javascript" src="/js/src/fireworks.js"></script><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Eibit's Blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br> 关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-count"><a href="/count/" rel="section"><i class="menu-item-icon fa fa-fw fa-star"></i><br> Top10</a></li><li class="menu-item menu-item-message"><a href="/message/" rel="section"><i class="menu-item-icon fa fa-fw fa-commenting"></i><br> 留言</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://eibitme.github.io/2017/12/20/SQL注入之细节 - 入门篇/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="洛"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar_meitu_1.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Eibit's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">SQL注入之细节 - 入门篇</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-20T11:23:00+08:00">2017-12-20</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Web安全研究笔记/" itemprop="url" rel="index"><span itemprop="name">Web安全研究笔记</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span><a href="/2017/12/20/SQL注入之细节 - 入门篇/#comments" itemprop="discussionUrl"><span class="post-comments-count gitment-comments-count" data-xid="/2017/12/20/SQL注入之细节 - 入门篇/" itemprop="commentsCount"></span></a></span> <span id="/2017/12/20/SQL注入之细节 - 入门篇/" class="leancloud_visitors" data-flag-title="SQL注入之细节 - 入门篇"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-thermometer-three-quarters"></i></span> <span class="post-meta-item-text">热度&#58;</span><span class="leancloud-visitors-count"></span> ℃</span></div></header><div class="post-body" itemprop="articleBody"><blockquote class="blockquote-center"><p>仁者见仁,智者见智</p></blockquote><p>SQL注入漏洞产生的原因是网站应用程序在编写时未对用户提交至服务器的数据进行合法性校验，即没有进行有效地特殊字符过滤，导致网站服务器存在安全风险，这就是SQL Injection，即SQL注入漏洞。</p><a id="more"></a><div class="note primary"><p>本篇侧重介绍SQL注入预备知识与攻击手法的细节分析与总结<br>SQL注入文分为 细节篇 与 实战篇 两个篇幅互补来看可加深理解</p></div><h1 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h1><h2 id="SQL-结构化查询语言"><a href="#SQL-结构化查询语言" class="headerlink" title="SQL 结构化查询语言"></a>SQL 结构化查询语言</h2><p><a href="https://baike.baidu.com/item/%E7%BB%93%E6%9E%84%E5%8C%96%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80/10450182?fr=aladdin&amp;fromid=86007&amp;fromtitle=sql" target="_blank" rel="noopener">结构化查询语言</a>(Structured Query Language) 简称 <strong>SQL</strong></p><h2 id="SQL学习"><a href="#SQL学习" class="headerlink" title="SQL学习"></a>SQL学习</h2><p>SQL基础语法简单易学,很快就能够掌握并使用</p><p><a href="http://www.w3school.com.cn/sql/index.asp" target="_blank" rel="noopener">w3school</a></p><p><a href="http://www.runoob.com/sql/sql-tutorial.html" target="_blank" rel="noopener">菜鸟教程</a></p><h1 id="SQL注入基础知识"><a href="#SQL注入基础知识" class="headerlink" title="SQL注入基础知识"></a>SQL注入基础知识</h1><h2 id="注入分类"><a href="#注入分类" class="headerlink" title="注入分类"></a>注入分类</h2><p>如有补充可以在本文留言,如果感觉难以理解,也可以跳过,当你学习完SQL注入篇再回头看这一段。</p><h3 id="基于从服务器接收到的响应"><a href="#基于从服务器接收到的响应" class="headerlink" title="基于从服务器接收到的响应"></a>基于从服务器接收到的响应</h3><ul><li>基于错误的SQL注入；</li><li>联合查询的类型；</li><li>堆查询注射；</li><li>SQL盲注:<ul><li>基于布尔的SQL盲注；</li><li>基于时间的SQL盲注；</li><li>基于报错的SQL盲注；</li></ul></li></ul><h3 id="基于如何处理输入的SQL查询-数据类型"><a href="#基于如何处理输入的SQL查询-数据类型" class="headerlink" title="基于如何处理输入的SQL查询(数据类型)"></a>基于如何处理输入的SQL查询(数据类型)</h3><ul><li>字符串为基础的；</li><li>数字或整数为基础的；</li></ul><h3 id="基于程序的顺序的注入-哪里发生了影响"><a href="#基于程序的顺序的注入-哪里发生了影响" class="headerlink" title="基于程序的顺序的注入(哪里发生了影响)"></a>基于程序的顺序的注入(哪里发生了影响)</h3><ul><li>一阶注入；</li><li>二阶注入；</li></ul><div class="note success"><p><strong>一阶注入</strong> 是指输入的注入语句对Web直接产生了影响，出现了结果； 二阶注入类似 <strong>存储型XSS</strong> 是指输入提交的语句，无法直接对Web应用程序产生影响，通过其他辅助间接的对Web产生危害，这样的注入就被称为 <strong>二阶注入</strong></p></div><h2 id="基于注入点的位置上的注入"><a href="#基于注入点的位置上的注入" class="headerlink" title="基于注入点的位置上的注入"></a>基于注入点的位置上的注入</h2><ul><li>通过用户输入的表单域的注入;</li><li>通过 <strong>cookie</strong> 注入;</li><li>通过服务器变量注入;</li></ul><h1 id="系统函数"><a href="#系统函数" class="headerlink" title="系统函数"></a>系统函数</h1><h2 id="常用的几个函数"><a href="#常用的几个函数" class="headerlink" title="常用的几个函数"></a>常用的几个函数</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">version()	# MySQL版本</span><br><span class="line">user()		# 数据库用户名</span><br><span class="line">database()	# 数据库名称</span><br><span class="line">@@datadir	# 数据库路径</span><br><span class="line">@@version_compile_os	# 操作系统版本</span><br></pre></td></tr></table></figure><h1 id="字符串连接函数"><a href="#字符串连接函数" class="headerlink" title="字符串连接函数"></a>字符串连接函数</h1><p>在select数据时，我们往往需要将数据进行连接后进行回显。很多的时候想将多个数据或者多行数据进行输出的时候，需要使用字符串连接函数。</p><h2 id="CONCAT-函数"><a href="#CONCAT-函数" class="headerlink" title="CONCAT()函数"></a>CONCAT()函数</h2><p>当我们不使用字符串连接函数时,查询语句返还结果是这样子的:<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT id,username FROM users;</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">| id | username |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">|  1 | Dumb     |</span><br><span class="line">|  2 | Angelina |</span><br><span class="line">|  3 | Dummy    |</span><br><span class="line">|  4 | secure   |</span><br><span class="line">|  5 | stupid   |</span><br><span class="line">|  6 | superman |</span><br><span class="line">|  7 | batman   |</span><br><span class="line">|  8 | admin    |</span><br><span class="line">|  9 | admin1   |</span><br><span class="line">| 10 | admin2   |</span><br><span class="line">| 11 | admin3   |</span><br><span class="line">| 12 | dhakkan  |</span><br><span class="line">| 14 | admin4   |</span><br><span class="line">+<span class="comment">----+----------+</span></span><br><span class="line">13 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p></p><p>但是这里存在的一个问题是当使用union联合注入时，我们都知道，联合注入要求前后两个选择的列数要相同，这里id，name是两个列，当我们要一个列的时候，（当然不排除你先爆出id，再爆出name，分两次的做法）该怎么办？</p><h3 id="CONCAT-语法及使用特点"><a href="#CONCAT-语法及使用特点" class="headerlink" title="CONCAT()语法及使用特点"></a>CONCAT()语法及使用特点</h3><p><a href="https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_concat" target="_blank" rel="noopener">CONCAT(str1,str2,…)</a><br></p><div class="note info"><p>返回连接参数的字符串,可能有一个或多个参数。如有任何一个参数为NULL ，则返回值为 NULL。</p></div><p></p><h3 id="CONCAT-使用示例"><a href="#CONCAT-使用示例" class="headerlink" title="CONCAT()使用示例"></a>CONCAT()使用示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT CONCAT('My', 'S', 'QL');</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| CONCAT('My', 'S', 'QL') |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">| MySQL                   |</span><br><span class="line">+<span class="comment">-------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="string">'My'</span>, <span class="literal">NULL</span>, <span class="string">'QL'</span>);</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">| CONCAT('My', NULL, 'QL') |</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">| NULL                     |</span><br><span class="line">+<span class="comment">--------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="number">14.3</span>);</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| CONCAT(14.3) |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">| 14.3         |</span><br><span class="line">+<span class="comment">--------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(<span class="number">14.3</span>);</span><br><span class="line">        -&gt; '14.3'</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT CONCAT(id, ',', username) FROM users;</span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">| CONCAT(id, ',', username) |</span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">| 1,Dumb                    |</span><br><span class="line">| 2,Angelina                |</span><br><span class="line">| 3,Dummy                   |</span><br><span class="line">| 4,secure                  |</span><br><span class="line">| 5,stupid                  |</span><br><span class="line">| 6,superman                |</span><br><span class="line">| 7,batman                  |</span><br><span class="line">| 8,admin                   |</span><br><span class="line">| 9,admin1                  |</span><br><span class="line">| 10,admin2                 |</span><br><span class="line">| 11,admin3                 |</span><br><span class="line">| 12,dhakkan                |</span><br><span class="line">| 14,admin4                 |</span><br><span class="line">+<span class="comment">---------------------------+</span></span><br><span class="line">13 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>一般的我们都要用一个字符将各个项隔开，便于数据的查看。</p><h2 id="CONCAT-WS-函数"><a href="#CONCAT-WS-函数" class="headerlink" title="CONCAT_WS()函数"></a>CONCAT_WS()函数</h2><p><a href="https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_concat-ws" target="_blank" rel="noopener">CONCAT_WS</a> 代表与分隔符连接，是CONCAT（）的特殊形式。 第一个参数是其余参数的分隔符。 分隔符被添加在串联的字符串之间。 分隔符可以是一个字符串，其余的参数也是如此。 如果分隔符为NULL，则结果为NULL。CONCAT_WS()不会忽略任何空字符串, (然而会忽略所有的 NULL）。</p><h3 id="CONCAT-WS-语法及其使用特点"><a href="#CONCAT-WS-语法及其使用特点" class="headerlink" title="CONCAT_WS()语法及其使用特点"></a>CONCAT_WS()语法及其使用特点</h3><p><a href="https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_concat-ws" target="_blank" rel="noopener">CONCAT_WS(separator,str1,str2,…)</a><br></p><div class="note info"><p>Separator为字符之间的分隔符</p></div><p></p><h3 id="CONCAT-WS-使用示例"><a href="#CONCAT-WS-使用示例" class="headerlink" title="CONCAT_WS()使用示例"></a>CONCAT_WS()使用示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT CONCAT_WS(',','First name','Second name','Last Name');</span><br><span class="line">+<span class="comment">-------------------------------------------------------+</span></span><br><span class="line">| CONCAT_WS(',','First name','Second name','Last Name') |</span><br><span class="line">+<span class="comment">-------------------------------------------------------+</span></span><br><span class="line">| First name,Second name,Last Name                      |</span><br><span class="line">+<span class="comment">-------------------------------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> <span class="keyword">CONCAT_WS</span>(<span class="string">','</span>,<span class="string">'First name'</span>,<span class="literal">NULL</span>,<span class="string">'Last Name'</span>);</span><br><span class="line">+<span class="comment">----------------------------------------------+</span></span><br><span class="line">| CONCAT_WS(',','First name',NULL,'Last Name') |</span><br><span class="line">+<span class="comment">----------------------------------------------+</span></span><br><span class="line">| First name,Last Name                         |</span><br><span class="line">+<span class="comment">----------------------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> <span class="keyword">CONCAT_WS</span>(<span class="literal">NULL</span>,<span class="string">'First name'</span>,<span class="string">'Second name'</span>,<span class="string">'Last Name'</span>);</span><br><span class="line">+<span class="comment">--------------------------------------------------------+</span></span><br><span class="line">| CONCAT_WS(NULL,'First name','Second name','Last Name') |</span><br><span class="line">+<span class="comment">--------------------------------------------------------+</span></span><br><span class="line">| NULL                                                   |</span><br><span class="line">+<span class="comment">--------------------------------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><h2 id="GROUP-CONCAT-函数"><a href="#GROUP-CONCAT-函数" class="headerlink" title="GROUP_CONCAT() 函数"></a>GROUP_CONCAT() 函数</h2><p><strong><em>GROUP_CONCAT()</em></strong> 函数返回一个字符串结果，该结果由分组中的值连接组合而成。</p><h3 id="使用语法及其特点"><a href="#使用语法及其特点" class="headerlink" title="使用语法及其特点"></a>使用语法及其特点</h3><p>函数返回带有来自一个组的连接的非NULL值的字符串结果。该函数是一个增强的Sybase SQL Anywhere支持的基本LIST()函数。<br> <strong><em><font size="2px" color="green">GROUP_CONCAT([DISTINCT] expr [,expr …] [ORDER BY {unsigned_integer | col_name | expr} [ASC | DESC] [,col_name …]] [SEPARATOR str_val])</font></em></strong><br></p><div class="note info"><p><strong>DISTINCT：</strong> 去除重复值;<br><strong>expr [,expr …]：</strong> 一个或多个字段（或表达式）<br><strong>ORDER BY {unsigned_integer | col_name | expr} [ASC | DESC] [,col_name …]：</strong> 根据字段或表达式进行排序，可多个<br><strong>SEPARATOR str_val：</strong> 分隔符（默认为英文逗号）</p></div><p></p><p>其实吧，这个讲的七七八八的，晕里晕乎的，我们还是边用边解释吧。</p><h3 id="GROUP-CONCAT-使用示例"><a href="#GROUP-CONCAT-使用示例" class="headerlink" title="GROUP_CONCAT()使用示例"></a>GROUP_CONCAT()使用示例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 我们来列出列出所有的数据库，先来看不使用GROUP_CONCAT()函数是个怎么样的效果</span></span><br><span class="line">mysql&gt; SELECT schema_name FROM information_schema.schemata;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| schema_name        |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| information_schema |</span><br><span class="line">| audit              |</span><br><span class="line">| challenges         |</span><br><span class="line">| dvwa               |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| security           |</span><br><span class="line">| test               |</span><br><span class="line">| tptest             |</span><br><span class="line">| wangan             |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">10 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)   <span class="comment">-- 返回的是个列表（list）里有多行（10 rows）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 我们再来看看使用了 GROUP_CONCAT() 函数是个什么效果</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">group_concat</span>(schema_name) <span class="keyword">from</span> information_schema.schemata;</span><br><span class="line">+<span class="comment">-----------------------------------------------------------------------------------------------+</span></span><br><span class="line">| group_concat(schema_name)                                                                     |</span><br><span class="line">+<span class="comment">-----------------------------------------------------------------------------------------------+</span></span><br><span class="line">| information_schema,audit,challenges,dvwa,mysql,performance_schema,security,test,tptest,wangan |</span><br><span class="line">+<span class="comment">-----------------------------------------------------------------------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec) </span><br><span class="line"><span class="comment">--结果已经很明显了, GROUP_CONCAT()把多个字符串连接成了一个，默认使用逗号进行分割，所以我们可以看到使用了 GROUP_CONCAT()函数的查询语句,只回显一行 （1 rows）</span></span><br><span class="line"></span><br><span class="line">mysql&gt; <span class="keyword">select</span> <span class="keyword">group_concat</span>(schema_name SEPARATOR <span class="string">';'</span>) <span class="keyword">from</span> information_schema.schemata;</span><br><span class="line">+<span class="comment">-----------------------------------------------------------------------------------------------+</span></span><br><span class="line">| group_concat(schema_name SEPARATOR ';')                                                       |</span><br><span class="line">+<span class="comment">-----------------------------------------------------------------------------------------------+</span></span><br><span class="line">| information_schema;audit;challenges;dvwa;mysql;performance_schema;security;test;tptest;wangan |</span><br><span class="line">+<span class="comment">-----------------------------------------------------------------------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec) <span class="comment">-- 使用分号分割</span></span><br></pre></td></tr></table></figure><h1 id="一般用于判断SQL注入的语句"><a href="#一般用于判断SQL注入的语句" class="headerlink" title="一般用于判断SQL注入的语句"></a>一般用于判断SQL注入的语句</h1><div class="note info"><p>PS : <code>--+</code> 可以用 <code>#</code> 替换, url提交过程中url编码后的 <code>#</code> 为 <code>%23</code><br>or 1=1–+<br>‘ or 1=1–+<br>“ or 1=1–+<br>) or 1=1–+<br>‘) or 1=1–+<br>“) or 1=1–+<br>“)) or 1=1–+</p></div><p>存在SQL注入的代码可能像下面这样子:<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$id=$_GET[<span class="string">'id'</span>];</span><br><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id='$id' LIMIT 0,1"</span>;</span><br></pre></td></tr></table></figure><p></p><p>可以产生一下联想,如果我们插入的 $id 多了一个引号会怎么样?<br></p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sql=<span class="string">"SELECT * FROM users WHERE id='1'' LIMIT 0,1"</span>;</span><br></pre></td></tr></table></figure><p></p><p>因为多了一个引号,字符串无法闭合,会产生一条错误,所以此处考虑两个点,一个是闭合前面的 <code>&#39;</code> 另一个是把后面的 <code>&#39;</code> 处理掉(一般采用两种思路,闭合后面的引号或将他注释掉 <code>--</code> <code>#</code> <code>%23</code>)</p><h1 id="union-操作符的介绍"><a href="#union-操作符的介绍" class="headerlink" title="union 操作符的介绍"></a>union 操作符的介绍</h1><p><a href="http://www.runoob.com/sql/sql-union.html" target="_blank" rel="noopener">UNION</a> 操作符用于合并两个或多个 SELECT 语句的结果集。请注意，UNION 内部的每个 SELECT 语句必须拥有相同数量的列。列也必须拥有相似的数据类型。同时，每个 SELECT 语句中的列的顺序必须相同。</p><h2 id="SQL-UNION-语法"><a href="#SQL-UNION-语法" class="headerlink" title="SQL UNION 语法"></a>SQL UNION 语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table2;</span><br><span class="line"><span class="comment">-- 注释：默认地，UNION 操作符选取不同的值。如果允许重复的值，请使用 UNION ALL。</span></span><br></pre></td></tr></table></figure><h2 id="SQL-UNION-ALL-语法"><a href="#SQL-UNION-ALL-语法" class="headerlink" title="SQL UNION ALL 语法"></a>SQL UNION ALL 语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table1</span><br><span class="line"><span class="keyword">UNION</span> ALL</span><br><span class="line"><span class="keyword">SELECT</span> column_name(s) <span class="keyword">FROM</span> table2;</span><br><span class="line"><span class="comment">-- 注释：UNION 结果集中的列名总是等于 UNION 中第一个 SELECT 语句中的列名。</span></span><br></pre></td></tr></table></figure><h1 id="SQL-中的逻辑运算"><a href="#SQL-中的逻辑运算" class="headerlink" title="SQL 中的逻辑运算"></a>SQL 中的逻辑运算</h1><h2 id="提问"><a href="#提问" class="headerlink" title="提问"></a>提问</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>上面这条语句为什么能够选择出 id=1 的内容，and 1=1 到底起作用了没有? 这里就要清楚sql语句执行的顺序了。<br>这个问题我们在尝试万能密码的时候也会用到。<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">admin</span> <span class="keyword">WHERE</span> username=<span class="string">'admin'</span> <span class="keyword">AND</span> <span class="keyword">password</span>=<span class="string">''</span> <span class="keyword">OR</span> <span class="number">1</span>=<span class="number">1</span>#<span class="string">'</span></span><br></pre></td></tr></table></figure><p></p><p><code>&#39; pr 1=1#</code> 就是我们注入的语句。在上面这个语句执行后，我们在不知道密码的情况下就能登录admin用户了。原因其实在 <code>WHERE</code> 字句之后，我们可以看到多重判断的条件语句 <code>username=&#39;admin&#39; AND password=&#39;&#39; or 1=1</code>。我们用一个简单的方式来看待这条判断语句:<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(username='admin') AND ((password='') OR (1=1));</span><br></pre></td></tr></table></figure><p></p><p>在这里我使用了 <code>()</code> 规划出了他们的运算顺序emmm… 其实我表达能力有限,不知道怎么以最简洁的语言来描述这比较简单逻辑运算,相信有点编程基础或数学基础的，都能看的懂吧。</p><h2 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span> &amp;&amp; <span class="number">1</span>=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">users</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span> &amp; <span class="number">1</span>=<span class="number">1</span>;</span><br></pre></td></tr></table></figure><p>上面的语句中 第一行与第二行没有区别 <code>&amp;&amp;</code> 是 <code>AND</code> 的另一种表达形式。</p><p>而第三行的意思是 <code>id=1</code> 为 <code>true</code> 与 1进行位运算 结果还是1,再进行 <code>=</code> 操作( <code>1=1</code> ),结果还是1(ps: &amp;优先级大于=)<br></p><div class="note info"><p>此处进行的位运算。我们可以将数转换为二进制再进行与、或、非、异或等运算。必要的时候可以利用该方法进行诸如结果。例如将某一字符转换为ascii码后，可以分别与1,2,4,8,16,32等进行与运算，可以得到每一位的值，拼接起来就是ascii码值。再从ascii值反退回字符。</p></div><p></p><h1 id="注入流程"><a href="#注入流程" class="headerlink" title="注入流程"></a>注入流程</h1><p><strong><em><code>判断注入类型 → 获取数据库名 → 获取数据库下的数据表名 → 获取当前数据表下的列名 → 获取数据</code></em></strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询数据库名</span></span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| Database           |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| information_schema |</span><br><span class="line">| audit              |</span><br><span class="line">| challenges         |</span><br><span class="line">| dvwa               |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| security           |</span><br><span class="line">| test               |</span><br><span class="line">| tptest             |</span><br><span class="line">| wangan             |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">10 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 转换数据库为 security</span></span><br><span class="line">mysql&gt; <span class="keyword">use</span> <span class="keyword">security</span>;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看数据库中存在的表名</span></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| Tables_in_security |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">| emails             |</span><br><span class="line">| referers           |</span><br><span class="line">| uagents            |</span><br><span class="line">| users              |</span><br><span class="line">+<span class="comment">--------------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看 emails 的表结构</span></span><br><span class="line">mysql&gt; <span class="keyword">desc</span> emails;</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id       | int(3)      | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| email_id | varchar(30) | NO   |     | NULL    |                |</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">2 rows in <span class="keyword">set</span> (<span class="number">0.07</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看 users 的表结构</span></span><br><span class="line">mysql&gt; <span class="keyword">desc</span> <span class="keyword">users</span>;</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| Field    | Type        | Null | Key | Default | Extra          |</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">| id       | int(3)      | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| username | varchar(20) | NO   |     | NULL    |                |</span><br><span class="line">| password | varchar(20) | NO   |     | NULL    |                |</span><br><span class="line">+<span class="comment">----------+-------------+------+-----+---------+----------------+</span></span><br><span class="line">3 rows in <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 待续</span></span><br></pre></td></tr></table></figure><h2 id="系统数据库-information-schema"><a href="#系统数据库-information-schema" class="headerlink" title="系统数据库 information_schema"></a>系统数据库 information_schema</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用 information_schema 数据库</span></span><br><span class="line">mysql&gt; use information_schema;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看表格</span></span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+<span class="comment">---------------------------------------+</span></span><br><span class="line">| Tables_in_information_schema          |</span><br><span class="line">+<span class="comment">---------------------------------------+</span></span><br><span class="line">| CHARACTER_SETS                        |</span><br><span class="line">| COLLATIONS                            |</span><br><span class="line">| COLLATION_CHARACTER_SET_APPLICABILITY |</span><br><span class="line">| COLUMNS                               |</span><br><span class="line">| COLUMN_PRIVILEGES                     |</span><br><span class="line">| ENGINES                               |</span><br><span class="line">| EVENTS                                |</span><br><span class="line">| FILES                                 |</span><br><span class="line">| GLOBAL_STATUS                         |</span><br><span class="line">| GLOBAL_VARIABLES                      |</span><br><span class="line">| KEY_COLUMN_USAGE                      |</span><br><span class="line">| PARAMETERS                            |</span><br><span class="line">| PARTITIONS                            |</span><br><span class="line">| PLUGINS                               |</span><br><span class="line">| PROCESSLIST                           |</span><br><span class="line">| PROFILING                             |</span><br><span class="line">| REFERENTIAL_CONSTRAINTS               |</span><br><span class="line">| ROUTINES                              |</span><br><span class="line">| SCHEMATA                              |</span><br><span class="line">| SCHEMA_PRIVILEGES                     |</span><br><span class="line">| SESSION_STATUS                        |</span><br><span class="line">| SESSION_VARIABLES                     |</span><br><span class="line">| STATISTICS                            |</span><br><span class="line">| TABLES                                |</span><br><span class="line">| TABLESPACES                           |</span><br><span class="line">| TABLE_CONSTRAINTS                     |</span><br><span class="line">| TABLE_PRIVILEGES                      |</span><br><span class="line">| TRIGGERS                              |</span><br><span class="line">| USER_PRIVILEGES                       |</span><br><span class="line">| VIEWS                                 |</span><br><span class="line">| INNODB_BUFFER_PAGE                    |</span><br><span class="line">| INNODB_TRX                            |</span><br><span class="line">| INNODB_BUFFER_POOL_STATS              |</span><br><span class="line">| INNODB_LOCK_WAITS                     |</span><br><span class="line">| INNODB_CMPMEM                         |</span><br><span class="line">| INNODB_CMP                            |</span><br><span class="line">| INNODB_LOCKS                          |</span><br><span class="line">| INNODB_CMPMEM_RESET                   |</span><br><span class="line">| INNODB_CMP_RESET                      |</span><br><span class="line">| INNODB_BUFFER_PAGE_LRU                |</span><br><span class="line">+<span class="comment">---------------------------------------+</span></span><br><span class="line">40 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 我们先来枚举这张表</span></span><br><span class="line">mysql&gt; <span class="keyword">desc</span> <span class="keyword">tables</span>;</span><br><span class="line">+<span class="comment">-----------------+---------------------+------+-----+---------+-------+</span></span><br><span class="line">| Field           | Type                | Null | Key | Default | Extra |</span><br><span class="line">+<span class="comment">-----------------+---------------------+------+-----+---------+-------+</span></span><br><span class="line">| TABLE_CATALOG   | varchar(512)        | NO   |     |         |       |</span><br><span class="line">| TABLE_SCHEMA    | varchar(64)         | NO   |     |         |       |</span><br><span class="line">| TABLE_NAME      | varchar(64)         | NO   |     |         |       |</span><br><span class="line">| TABLE_TYPE      | varchar(64)         | NO   |     |         |       |</span><br><span class="line">| ENGINE          | varchar(64)         | YES  |     | NULL    |       |</span><br><span class="line">| VERSION         | bigint(21) unsigned | YES  |     | NULL    |       |</span><br><span class="line">| ROW_FORMAT      | varchar(10)         | YES  |     | NULL    |       |</span><br><span class="line">| TABLE_ROWS      | bigint(21) unsigned | YES  |     | NULL    |       |</span><br><span class="line">| AVG_ROW_LENGTH  | bigint(21) unsigned | YES  |     | NULL    |       |</span><br><span class="line">| DATA_LENGTH     | bigint(21) unsigned | YES  |     | NULL    |       |</span><br><span class="line">| MAX_DATA_LENGTH | bigint(21) unsigned | YES  |     | NULL    |       |</span><br><span class="line">| INDEX_LENGTH    | bigint(21) unsigned | YES  |     | NULL    |       |</span><br><span class="line">| DATA_FREE       | bigint(21) unsigned | YES  |     | NULL    |       |</span><br><span class="line">| AUTO_INCREMENT  | bigint(21) unsigned | YES  |     | NULL    |       |</span><br><span class="line">| CREATE_TIME     | datetime            | YES  |     | NULL    |       |</span><br><span class="line">| UPDATE_TIME     | datetime            | YES  |     | NULL    |       |</span><br><span class="line">| CHECK_TIME      | datetime            | YES  |     | NULL    |       |</span><br><span class="line">| TABLE_COLLATION | varchar(32)         | YES  |     | NULL    |       |</span><br><span class="line">| <span class="keyword">CHECKSUM</span>        | <span class="built_in">bigint</span>(<span class="number">21</span>) <span class="keyword">unsigned</span> | YES  |     | <span class="literal">NULL</span>    |       |</span><br><span class="line">| CREATE_OPTIONS  | <span class="built_in">varchar</span>(<span class="number">255</span>)        | YES  |     | <span class="literal">NULL</span>    |       |</span><br><span class="line">| TABLE_COMMENT   | <span class="built_in">varchar</span>(<span class="number">2048</span>)       | <span class="keyword">NO</span>   |     |         |       |</span><br><span class="line">+<span class="comment">-----------------+---------------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">21</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用如下查询 我们可以下载到表名。</span></span><br><span class="line">mysql&gt; <span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema=<span class="string">'security'</span>;</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| table_name |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| emails     |</span><br><span class="line">| referers   |</span><br><span class="line">| uagents    |</span><br><span class="line">| users      |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">4 rows in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 结合一下之前学过的知识 使用 GROUP_CONCAT()函数</span></span><br><span class="line">mysql&gt; <span class="keyword">SELECT</span> <span class="keyword">group_concat</span>(table_name) <span class="keyword">AS</span> <span class="string">'table_name'</span> <span class="keyword">FROM</span> information_schema.tables <span class="keyword">WHERE</span> table_schema=<span class="string">'security'</span>;</span><br><span class="line">+<span class="comment">-------------------------------+</span></span><br><span class="line">| table_name                    |</span><br><span class="line">+<span class="comment">-------------------------------+</span></span><br><span class="line">| emails,referers,uagents,users |</span><br><span class="line">+<span class="comment">-------------------------------+</span></span><br><span class="line">1 row in <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure><p>入门篇暂且到这里就结束了，细节篇暂且告一段落，万事开头难，对于新入门的小伙伴们，刚开始总是很迷茫的，面对着一箩筐一箩筐的知识，不知如何下手。往往学东西可能只掌握了表面，知其然而不知其所以然，</p><div class="note info"><p>如果一件事情你不能讲清楚，十有八九你还没有完全理解。</p></div><h1 id="参考来源"><a href="#参考来源" class="headerlink" title="参考来源"></a>参考来源</h1><p><a href="https://github.com/lcamry/sqli-labs" target="_blank" rel="noopener">《MYSQL注入天书 - SQLi-labs使用手册》</a><br><a href="http://www.cnblogs.com/lcamry" target="_blank" rel="noopener">http://www.cnblogs.com/lcamry</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 洛</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://eibitme.github.io/2017/12/20/SQL注入之细节 - 入门篇/" title="SQL注入之细节 - 入门篇">https://eibitme.github.io/2017/12/20/SQL注入之细节 - 入门篇/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/SQL-Injection/" rel="tag"><i class="fa fa-tag"></i> SQL Injection</a><a href="/tags/SQLi-细节篇/" rel="tag"><i class="fa fa-tag"></i> SQLi 细节篇</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/12/17/Hexo博客搭建笔记/" rel="next" title="Hexo博客搭建笔记"><i class="fa fa-chevron-left"></i> Hexo博客搭建笔记</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2017/12/20/SQL注入之实战 - 入门篇/" rel="prev" title="SQL注入之实战 - 入门篇">SQL注入之实战 - 入门篇<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="gitment-container"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar_meitu_1.jpg" alt="洛"><p class="site-author-name" itemprop="name">洛</p><p class="site-description motion-element" itemprop="description">守得云开见月明</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">3</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">2</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">4</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://weibo.com/u/5633403474" target="_blank" title="微博"><i class="fa fa-fw fa-weibo"></i> 微博</a></span><span class="links-of-author-item"><a href="https://github.com/eibitme/eibitme.github.io" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/eibitme/activities" target="_blank" title="知乎"><i class="fa fa-fw fa-bullseye"></i> 知乎</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#预备知识"><span class="nav-text">预备知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-结构化查询语言"><span class="nav-text">SQL 结构化查询语言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL学习"><span class="nav-text">SQL学习</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL注入基础知识"><span class="nav-text">SQL注入基础知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#注入分类"><span class="nav-text">注入分类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基于从服务器接收到的响应"><span class="nav-text">基于从服务器接收到的响应</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于如何处理输入的SQL查询-数据类型"><span class="nav-text">基于如何处理输入的SQL查询(数据类型)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基于程序的顺序的注入-哪里发生了影响"><span class="nav-text">基于程序的顺序的注入(哪里发生了影响)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基于注入点的位置上的注入"><span class="nav-text">基于注入点的位置上的注入</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#系统函数"><span class="nav-text">系统函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#常用的几个函数"><span class="nav-text">常用的几个函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#字符串连接函数"><span class="nav-text">字符串连接函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CONCAT-函数"><span class="nav-text">CONCAT()函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CONCAT-语法及使用特点"><span class="nav-text">CONCAT()语法及使用特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CONCAT-使用示例"><span class="nav-text">CONCAT()使用示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CONCAT-WS-函数"><span class="nav-text">CONCAT_WS()函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CONCAT-WS-语法及其使用特点"><span class="nav-text">CONCAT_WS()语法及其使用特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CONCAT-WS-使用示例"><span class="nav-text">CONCAT_WS()使用示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GROUP-CONCAT-函数"><span class="nav-text">GROUP_CONCAT() 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用语法及其特点"><span class="nav-text">使用语法及其特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GROUP-CONCAT-使用示例"><span class="nav-text">GROUP_CONCAT()使用示例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一般用于判断SQL注入的语句"><span class="nav-text">一般用于判断SQL注入的语句</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#union-操作符的介绍"><span class="nav-text">union 操作符的介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-UNION-语法"><span class="nav-text">SQL UNION 语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SQL-UNION-ALL-语法"><span class="nav-text">SQL UNION ALL 语法</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL-中的逻辑运算"><span class="nav-text">SQL 中的逻辑运算</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#提问"><span class="nav-text">提问</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#位运算"><span class="nav-text">位运算</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#注入流程"><span class="nav-text">注入流程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#系统数据库-information-schema"><span class="nav-text">系统数据库 information_schema</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考来源"><span class="nav-text">参考来源</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2017</span><span class="with-love"><i class="fa fa-address-card-o"></i></span> <span class="author" itemprop="copyrightHolder">洛</span></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script> <span class="site-uv"><i class="fa fa-blind">本站总访问人数</i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人</span> <span class="site-pv"><i class="fa fa-eye">本站总访问量</i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script><link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css"><script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script><style>a.gitment-editor-footer-tip{display:none}.gitment-container.gitment-footer-container{display:none}</style><script type="text/javascript">function renderGitment(){new Gitmint({id:window.location.pathname,owner:"eibitme",repo:"eibitme.github.io",lang:"en",oauth:{client_secret:"186dd743b13c104ab21b39cd4128cefea9f33656",client_id:"ebf97c86c9b48e8df644"}}).render("gitment-container")}renderGitment()</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){var r=!1,s=0,a=0,i=n.title.trim(),c=i.toLowerCase(),l=n.content.trim().replace(/<[^>]+>/g,""),h=l.toLowerCase(),p=decodeURIComponent(n.url),u=[],f=[];if(""!=i&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}u=u.concat(e(t,c,!1)),f=f.concat(e(t,h,!1))}),(u.length>0||f.length>0)&&(r=!0,s=u.length+f.length)),r){[u,f].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});function d(e,o,n,r){for(var s=r[r.length-1],i=s.position,c=s.word,l=[],h=0;i+c.length<=n&&0!=r.length;){c===t&&h++,l.push({position:i,length:c.length});var p=i+c.length;for(r.pop();0!=r.length&&(s=r[r.length-1],i=s.position,c=s.word,p>i);)r.pop()}return a+=h,{hits:l,start:o,end:n,searchTextCount:h}}var g=[];0!=u.length&&g.push(d(0,0,i.length,u));for(var v=[];0!=f.length;){var $=f[f.length-1],C=$.position,m=$.word,x=C-20,w=C+80;x<0&&(x=0),w<C+m.length&&(w=C+m.length),w>l.length&&(w=l.length),v.push(d(0,x,w,f))}v.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var y=parseInt("1");y>=0&&(v=v.slice(0,y));function T(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var b="";0!=g.length?b+="<li><a href='"+p+"' class='search-result-title'>"+T(i,g[0])+"</a>":b+="<li><a href='"+p+"' class='search-result-title'>"+i+"</a>",v.forEach(function(t){b+="<a href='"+p+'\'><p class="search-result">'+T(l,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:a,hitCount:s,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),!1===isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){27===t.which&&$(".search-popup").is(":visible")&&onPopupClose()})</script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("RKvKwJhd1yoEbb7NSJXMCHwH-gzGzoHsz","rsEO19PorMhCp4nqQLqAVqwG")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var i=0;i<e.length;i++){var s=e[i],r=s.get("url"),l=s.get("time"),c=document.getElementById(r);$(c).find(t).text(l)}for(i=0;i<n.length;i++){r=n[i],c=document.getElementById(r);var u=$(c).find(t);""==u.text()&&u.text(0)}}else o.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){$(document.getElementById(n)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var s=new e,r=new AV.ACL;r.setPublicReadAccess(!0),r.setPublicWriteAccess(!0),s.setACL(r),s.set("title",o),s.set("url",n),s.set("time",1),s.save(null,{success:function(e){$(document.getElementById(n)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script type="text/javascript" src="/js/src/love.js"></script><script type="text/javascript">function GetRequest(){var e=location.search,r=new Object;if(-1!=e.indexOf("?")){var t=e.substr(1);strs=t.split("&");for(var i=0;i<strs.length;i++)r[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1])}return r}!function(){if("gfan"!=GetRequest().index){var e=navigator.userAgent.toLowerCase(),r=function(e,r){if(-1!=e.indexOf(r))return!0};if(r(e,"android")&&r(e,"mobile")||r(e,"android")&&r(e,"mozilla")||r(e,"android")&&r(e,"opera")||r(e,"ucweb7")||r(e,"iphone"))return!1;$.getScript("/js/src/particle.js?v=5.1.3")}}()</script><script type="text/javascript" src="/js/src/jquery-stars.js?v=5.1.3"></script><script type="text/javascript">jQuery("body").jstars({image_path:"/images",image:"candy-cane-stars.png",style:"white",width:34,height:34,delay:700,frequency:5})</script><script type="text/javascript">var st,OriginTitile=document.title;document.addEventListener("visibilitychange",function(){document.hidden?(document.title="∑(っ °Д °;)っ 别走嘛~ 不来一发吗?!",clearTimeout(st)):(document.title="ヾ(=^▽^=)ノ Thank U~ "+OriginTitile,st=setTimeout(function(){document.title=OriginTitile},4e3))})</script></body></html>